!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=9)}({10:function(t,e){!function(t,e){var n=t.Dcat;function r(t){this.options=e.extend({button:null,table:null,url:"",perPage:"",showNextPage:"",pageQueryName:"",parentIdQueryName:"",tierQueryName:"",showIcon:"fa-angle-right",hideIcon:"fa-angle-down",loadMoreIcon:'<i class="feather icon-more-horizontal"></i>'},t),this.key=this.tier=this.row=this.data=this._req=null,this._init()}function i(t){this.options=e.extend({button:null,url:""},t),this.direction=this.key=this.tier=this.row=this._req=null,this.init()}function o(t){function r(t,i){var o=e(this);i=i||o,(t=o.data("url")||t)&&(i.attr("data-current",t),i.loading({background:"transparent!important"}),n.helpers.asyncRender(t,(function(t){i.loading(!1),i.html(t),function(t){function i(){return r(e(this).attr("href"),t),!1}t.find(".pagination .page-link").on("click",i),t.find(".grid-column-header a").on("click",i),t.find("form").on("submit",(function(){return r(e(this).attr("action")+"&"+e(this).serialize(),t),!1})),t.find(".filter-box .reset").on("click",i),t.find(".grid-selector a").on("click",i),n.ready((function(){setTimeout((function(){t.find(".grid-refresh").off("click").on("click",(function(){return r(t.data("current"),t),!1}))}),10)}))}(i),i.trigger("table:loaded")})))}t=e.extend({container:".table-card"},t),e(t.container).on("table:load",r)}function a(t){return"tr"===e(t).prop("tagName").toLocaleLowerCase()}function c(t){return parseInt(e(t).data("tier")||0)}function u(t,e){return c(e)>c(t)}function l(t,n){var r,i=[],o=!1;return t.each((function(t,c){a(c)&&!o&&(r||(r=e(c)),r&&!u(n,r)||(u(n,c)?i.push(c):o=!0))})),i}function s(t,e){if(t&&t.length&&e===c(t))return!0}function f(t,n){var r;return t.each((function(t,i){c(i)===n&&!r&&a(i)&&(r=e(i))})),r}r.prototype={_init:function(){this._bindClick()},_bindClick:function(){var t=this,n=t.options;e(n.button).off("click").click((function(){if(!t._req){var r=e(this),i=e("i",this),o=i.hasClass(n.showIcon);t.key=r.data("key"),t.tier=r.data("tier"),t.row=r.closest("tr"),"0"==r.data("inserted")&&(t.request(1),r.data("inserted",1)),i.toggleClass(n.showIcon+" "+n.hideIcon);var a=[];l(t.row.nextAll(),t.row).forEach((function(n){c(n)===t.tier+1&&(a.push(n),o?e(n).show():e(n).hide())})),a.forEach((function(t){if(!o){var r=e(t).find("a[data-tier="+c(t)+"] i");r.hasClass(n.hideIcon)&&r.parent().click()}}))}}))},request:function(t,r){var i=this,o=i.row,a=i.key,c=i.tier,u=i.options.table;if(!i._req){i._req=1,n.loading();var s={};s[i.options.parentIdQueryName]=a,s[i.options.tierQueryName]=c+1,s[i.options.pageQueryName.replace(":key",a)]=t,e.ajax({url:i.options.url,type:"GET",data:s,headers:{"X-PJAX":!0},success:function(a){r&&r(),n.loading(!1),i._req=0;var s=l(o.nextAll(),o);o=s.length?e(s.pop()):o;var f=e("<div>"+a+"</div>"),d=f.find(u+" tbody"),h=f.find("last-page").text(),p=f.find("next-page").text();if(d.find("tr").each((function(t,n){e(n).attr("data-tier",c+1)})),i.options.showNextPage&&d.find("tr").length==i.options.perPage&&h>=t){var g=e('<tr data-tier="'.concat(c+1,'" data-page="').concat(p,'">\n                                <td colspan="').concat(o.find("td").length,'" align="center" style="cursor: pointer"> \n                                    <a href="#" style="font-size: 1.5rem">').concat(i.options.loadMoreIcon,"</a> \n                                </td>\n                            </tr>"));o.after(g),g.click((function(){var t=e(this);i.request(t.data("page"),(function(){t.remove()}))}))}o.after(d.html()),f.find("script").each((function(t,e){o.after(e)})),n.triggerReady()},error:function(t,e,o){r&&r(),n.loading(!1),i._req=0,404!=t.status&&n.handleAjaxError(t,e,o)}})}}},i.prototype={init:function(){var t=this;e(t.options.button).off("click").click((function(){if(!t._req){t._req=1,n.loading();var r=e(this);t.key=r.data("id"),t.direction=r.data("direction"),t.row=r.closest("tr"),t.tier=c(t.row),t.request()}}))},request:function(){var t=this,r=t.key,i=t.row,o=t.tier,a=t.direction,u=i.prevAll(),d=i.nextAll(),h=i.prevAll("tr").first(),p=i.nextAll("tr").first();e.put({url:t.options.url.replace(":key",r),data:{_orderable:a},success:function(r){if(n.loading(!1),t._req=0,!r.status)return r.message&&n.warning(r.message);if(n.success(r.message),a){var g=f(u,o);s(g,o)&&h.length&&c(h)>=o&&(g.before(i),l(d,i).forEach((function(t){g.before(t)})))}else{var y=f(d,o),b=y?l(y.nextAll(),y):[];if(s(y,o)&&p.length&&c(p)>=o){d=i.nextAll(),b.length&&(y=e(b.pop()));var v=[];l(d,i).forEach((function(t){v.unshift(t)})),v.forEach((function(t){y.after(t)})),y.after(i)}}},error:function(e,r,i){t._req=0,n.loading(!1),n.handleAjaxError(e,r,i)}})}},n.grid.Tree=function(t){return new r(t)},n.grid.Orderable=function(t){return new i(t)},n.grid.AsyncTable=function(t){return new o(t)}}(window,jQuery)},9:function(t,e,n){t.exports=n(10)}});
//# sourceMappingURL=grid-extend.js.map